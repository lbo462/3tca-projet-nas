Configuration BGP

PE1:

conf t
router bgp 100
bgp router-id 1.0.0.1

neighbor 50.50.50.1 remote-as 101
address-family ipv4 unicast
neighbor 50.50.50.1 activate

neighbor 100.100.100.1 remote-as 102
address-family ipv4 unicast
neighbor 100.100.100.1 activate

neighbor 4.4.4.4 remote-as 100
address-family ipv4 unicast
neighbor 4.4.4.4 activate
neighbor 4.4.4.4 update-source Loopback0
neighbor 4.4.4.4 next-hop-self


exit 
exit
exit
write


PE2:


conf t
router bgp 100
bgp router-id 1.0.0.2

neighbor 150.150.150.1 remote-as 103
address-family ipv4 unicast
neighbor 150.150.150.1  activate

neighbor 200.200.200.1 remote-as 104
address-family ipv4 unicast
neighbor 200.200.200.1 activate

neighbor 1.1.1.1 remote-as 100
address-family ipv4 unicast
neighbor 1.1.1.1 activate
neighbor 1.1.1.1 update-source Loopback0
neighbor 1.1.1.1 next-hop-self


exit 
exit
exit
write



CE1:


conf t
router bgp 101
bgp router-id 1.0.0.0


neighbor 50.50.50.2 remote-as 100
address-family ipv4 unicast
neighbor 50.50.50.2 activate

exit 
network 11.11.11.0 mask 255.255.255.0
exit
exit
write



CE2:


conf t
router bgp 102
bgp router-id 2.0.0.0


neighbor 100.100.100.2 remote-as 100
address-family ipv4 unicast
neighbor 100.100.100.2 activate

exit
network 12.12.12.0 mask 255.255.255.0

exit
exit
write


CE3:


conf t
router bgp 103
bgp router-id 3.0.0.0

 
neighbor 150.150.150.2 remote-as 100
address-family ipv4 unicast
neighbor 150.150.150.2 activate

exit
network 13.13.13.0 mask 255.255.255.0

exit
exit
write



CE4:


conf t
router bgp 104
bgp router-id 4.0.0.0


neighbor 200.200.200.2 remote-as 100
address-family ipv4 unicast
neighbor 200.200.200.200.2 activate

exit
network 14.14.14.0 mask 255.255.255.0

exit
exit
write






